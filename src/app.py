"""\nSlalom Capabilities Management System API\n\nA FastAPI application that enables Slalom consultants to register their\ncapabilities and manage consulting expertise across the organization.\n"""\n\nfrom fastapi import FastAPI, HTTPException\nfrom fastapi.staticfiles import StaticFiles\nfrom fastapi.responses import RedirectResponse\nimport os\nfrom pathlib import Path\n\napp = FastAPI(title=\"Slalom Capabilities Management API\",\n              description=\"API for managing consulting capabilities and consultant expertise\")\n\n# Mount the static files directory\ncurrent_dir = Path(__file__).parent\napp.mount(\"/static\", StaticFiles(directory=os.path.join(Path(__file__).parent,\n          \"static\")), name=\"static\")\n\n# In-memory capabilities database\ncapabilities = {\n    \"Cloud Architecture\": {\n        \"description\": \"Design and implement scalable cloud solutions using AWS, Azure, and GCP\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"AWS Solutions Architect\", \"Azure Architect Expert\"],\n        \"industry_verticals\": [\"Healthcare\", \"Financial Services\", \"Retail\"],\n        \"capacity\": 40,  # hours per week available across team\n        \"consultants\": [\"alice.smith@slalom.com\", \"bob.johnson@slalom.com\"]\n    },\n    \"Data Analytics\": {\n        \"description\": \"Advanced data analysis, visualization, and machine learning solutions\",\n        \"practice_area\": \"Technology\", \n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Tableau Desktop Specialist\", \"Power BI Expert\", \"Google Analytics\"],\n        \"industry_verticals\": [\"Retail\", \"Healthcare\", \"Manufacturing\"],\n        \"capacity\": 35,\n        \"consultants\": [\"emma.davis@slalom.com\", \"sophia.wilson@slalom.com\"]\n    },\n    \"DevOps Engineering\": {\n        \"description\": \"CI/CD pipeline design, infrastructure automation, and containerization\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"], \n        \"certifications\": [\"Docker Certified Associate\", \"Kubernetes Admin\", \"Jenkins Certified\"],\n        \"industry_verticals\": [\"Technology\", \"Financial Services\"],\n        \"capacity\": 30,\n        \"consultants\": [\"john.brown@slalom.com\", \"olivia.taylor@slalom.com\"]\n    },\n    \"Digital Strategy\": {\n        \"description\": \"Digital transformation planning and strategic technology roadmaps\",\n        \"practice_area\": \"Strategy\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Digital Transformation Certificate\", \"Agile Certified Practitioner\"],\n        \"industry_verticals\": [\"Healthcare\", \"Financial Services\", \"Government\"],\n        \"capacity\": 25,\n        \"consultants\": [\"liam.anderson@slalom.com\", \"noah.martinez@slalom.com\"]\n    },\n    \"Change Management\": {\n        \"description\": \"Organizational change leadership and adoption strategies\",\n        \"practice_area\": \"Operations\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Prosci Certified\", \"Lean Six Sigma Black Belt\"],\n        \"industry_verticals\": [\"Healthcare\", \"Manufacturing\", \"Government\"],\n        \"capacity\": 20,\n        \"consultants\": [\"ava.garcia@slalom.com\", \"mia.rodriguez@slalom.com\"]\n    },\n    \"UX/UI Design\": {\n        \"description\": \"User experience design and digital product innovation\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Adobe Certified Expert\", \"Google UX Design Certificate\"],\n        \"industry_verticals\": [\"Retail\", \"Healthcare\", \"Technology\"],\n        \"capacity\": 30,\n        \"consultants\": [\"amelia.lee@slalom.com\", \"harper.white@slalom.com\"]\n    },\n    \"Cybersecurity\": {\n        \"description\": \"Information security strategy, risk assessment, and compliance\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"CISSP\", \"CISM\", \"CompTIA Security+\"],\n        \"industry_verticals\": [\"Financial Services\", \"Healthcare\", \"Government\"],\n        \"capacity\": 25,\n        \"consultants\": [\"ella.clark@slalom.com\", \"scarlett.lewis@slalom.com\"]\n    },\n    \"Business Intelligence\": {\n        \"description\": \"Enterprise reporting, data warehousing, and business analytics\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Microsoft BI Certification\", \"Qlik Sense Certified\"],\n        \"industry_verticals\": [\"Retail\", \"Manufacturing\", \"Financial Services\"],\n        \"capacity\": 35,\n        \"consultants\": [\"james.walker@slalom.com\", \"benjamin.hall@slalom.com\"]\n    },\n    \"Agile Coaching\": {\n        \"description\": \"Agile transformation and team coaching for scaled delivery\",\n        \"practice_area\": \"Operations\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Certified Scrum Master\", \"SAFe Agilist\", \"ICAgile Certified\"],\n        \"industry_verticals\": [\"Technology\", \"Financial Services\", \"Healthcare\"],\n        \"capacity\": 20,\n        \"consultants\": [\"charlotte.young@slalom.com\", \"henry.king@slalom.com\"]\n    },\n    \"Slalom Build\": {\n        \"description\": \"Product strategy, user experience design, agile product development, and digital product innovation\",\n        \"practice_area\": \"Technology\",\n        \"skill_levels\": [\"Emerging\", \"Proficient\", \"Advanced\", \"Expert\"],\n        \"certifications\": [\"Certified Product Manager\", \"Agile Certified Practitioner\", \"Design Thinking Certified\"],\n        \"industry_verticals\": [\"Consumer Products\", \"FinTech\", \"HealthTech\", \"Retail\", \"Technology\"],\n        \"capacity\": 40,\n        \"consultants\": []\n    }\n}\n\n\n@app.get(\"/\")\ndef root():\n    return RedirectResponse(url=\"/static/index.html\")\n\n\n@app.get(\"/capabilities\")\ndef get_capabilities():\n    return capabilities\n\n\n@app.post(\"/capabilities/{capability_name}/register\")\ndef register_for_capability(capability_name: str, email: str):\n    \"\"\"Register a consultant for a capability\"\"\"\n    # Validate capability exists\n    if capability_name not in capabilities:\n        raise HTTPException(status_code=404, detail=\"Capability not found\")\n\n    # Get the specific capability\n    capability = capabilities[capability_name]\n\n    # Validate consultant is not already registered\n    if email in capability[\"consultants\"]:\n        raise HTTPException(\n            status_code=400,\n            detail=\"Consultant is already registered for this capability\"\n        )\n\n    # Add consultant\n    capability[\"consultants\"].append(email)\n    return {\"message\": f\"Registered {email} for {capability_name}\"}\n\n\n@app.delete(\"/capabilities/{capability_name}/unregister\")\ndef unregister_from_capability(capability_name: str, email: str):\n    \"\"\"Unregister a consultant from a capability\"\"\"\n    # Validate capability exists\n    if capability_name not in capabilities:\n        raise HTTPException(status_code=404, detail=\"Capability not found\")\n\n    # Get the specific capability\n    capability = capabilities[capability_name]\n\n    # Validate consultant is registered\n    if email not in capability[\"consultants\"]:\n        raise HTTPException(\n            status_code=400,\n            detail=\"Consultant is not registered for this capability\"\n        )\n\n    # Remove consultant\n    capability[\"consultants\"].remove(email)\n    return {\"message\": f\"Unregistered {email} from {capability_name}\"}\n